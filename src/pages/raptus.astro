---
import RaptusBase from '../layouts/RaptusBase.astro';
const base = import.meta.env.BASE_URL.replace(/\/$/, '');

const film = {
  title: 'Raptus',
  year: 2025,
  runtime: '86 min',
  genres: ['Erotic Thriller', 'Dark Comedy'],
  director: 'Bennet de Brabandere',
  tagline: 'She asked for therapy. He was programmed for desire.',
  cast: [
    { name: 'Ksenia Solo', role: 'Sarah', note: 'Orphan Black, Lost Girl' },
    { name: 'Nolan Gerard Funk', role: 'Raptus', note: 'Counterpart, Glee' },
    { name: 'Zion Forrest Lee', role: 'Murry' },
    { name: 'Christina Cox', role: 'Grace', note: 'Dexter, Blood Ties' },
    { name: 'Michael Lipka', role: 'Delivery Agent' },
  ],
  logline: 'After a brutal assault, Sarah enters an experimental android-therapy program. Her new companion begins to blur care with control — pushing their bond into dangerous, erotic territory she can\'t shut off.',
  synopsis: `After surviving a brutal assault, Sarah orders a new form of experimental android therapy called Raptus. But instead of helping her reclaim her mind, her new companion's controls will be pushed to the limit, putting her in extreme danger. Part erotic thriller, part dark comedy — DON'T TURN HIM ON.`,
  poster: `${base}/images/raptus-poster.jpg`,
  heroBg: `${base}/images/hero-bg.jpg`,
  stills: [
    { src: `${base}/images/stills/piano-room.jpg`, alt: 'Sarah in her home — production design', label: 'SESSION 01 — INTAKE' },
    { src: `${base}/images/stills/android-arrival.jpg`, alt: 'Raptus standing in the entry', label: 'SESSION 02 — FIRST CONTACT' },
    { src: `${base}/images/stills/raptus-closeup.jpg`, alt: 'Raptus — eerily perfect', label: 'SESSION 03 — CALIBRATION' },
    { src: `${base}/images/stills/control-tablet-new.jpg`, alt: 'The Raptus control interface', label: 'SESSION 04 — OVERRIDE' },
    { src: `${base}/images/stills/sarah-stun-gun.jpg`, alt: 'Sarah fights back', label: 'SESSION 05 — TERMINATION' },
  ],
  signals: [
    // Row 1: press, letterboxd, imdb, letterboxd
    { quote: 'The last 20 minutes are white-knuckle-thrilling in the best way possible.', source: 'Film Threat', author: 'Bobby LePire', rating: '8.5/10', dx: 'ELEVATED RESPONSE' },
    { quote: 'It\'s not a good movie but I had a good time watching it. Now — how do I order one of these?', source: 'Letterboxd', author: 'Billy Ray Brewton', rating: '★★★½', dx: 'COGNITIVE DISSONANCE' },
    { quote: 'The two main actors elevate this nonsense to something I\'ll definitely watch again.', source: 'IMDb', author: 'Featured Review', rating: '7/10', dx: 'REPEAT EXPOSURE' },
    { quote: 'Pretty cool sci-fi blend of erotic, psycho from hell thriller. I\'m here for it.', source: 'Letterboxd', author: 'eXistenZZ', rating: '★★★½', dx: 'PROTOCOL ACCEPTED' },
    // Row 2: letterboxd, press, letterboxd, imdb
    { quote: 'Baffling; brutal; curious; derivative; familiar; genre-bending; goofy; lo-fi; short; trashy; well-cast.', source: 'Letterboxd', author: 'joshrowley', rating: '★★', dx: 'SYSTEM OVERLOAD' },
    { quote: 'Solo and Funk\'s performances are both excellent.', source: 'Film Blitz', author: 'Jim McLennan', rating: null, dx: 'ATTACHMENT FORMED' },
    { quote: 'The music is...A CHOICE.', source: 'Letterboxd', author: 'Billy Ray Brewton', rating: null, dx: 'SENSORY DISRUPTION' },
    { quote: 'It\'s in the vein of M3GAN, just absurd and gratuitous. An oddly successful WTF watch.', source: 'IMDb', author: 'Featured Review', rating: null, dx: 'CLASSIFICATION FAILURE' },
    // Row 3: press, letterboxd, imdb, press
    { quote: 'Solo jumps through every imaginable emotion and makes each one believable.', source: 'Film Threat', author: 'Bobby LePire', rating: null, dx: 'EMPATHIC TRANSFER' },
    { quote: 'Nolan Gerard Funk was amazing as an eye candy sex robot.', source: 'Letterboxd', author: 'eXistenZZ', rating: null, dx: 'SUBJECT FIXATION' },
    { quote: 'And good lord, Nolan Funk is hot.', source: 'IMDb', author: 'Featured Review', rating: null, dx: 'INVOLUNTARY RESPONSE' },
    { quote: 'Things spiral dangerously out of control.', source: 'FirstShowing.net', author: 'Alex Billington', rating: null, dx: 'LOSS OF CONTROL' },
    // Row 4: letterboxd, press, letterboxd, imdb
    { quote: 'Best viewed after a bottle of wine.', source: 'Letterboxd', author: 'Nikola Gocic', rating: '★★½', dx: 'LOWERED INHIBITIONS' },
    { quote: 'A compelling little thriller with a great cast and an absolutely brilliant ending.', source: 'Film Threat', author: 'Bobby LePire', rating: null, dx: 'FULL ENGAGEMENT' },
    { quote: 'Like an unrated Lifetime thriller with sci-fi element.', source: 'Letterboxd', author: 'eXistenZZ', rating: null, dx: 'GENRE COLLAPSE' },
    { quote: 'The mark of a truly entertaining B movie is the cast committing 100% to the bit, and this cast does.', source: 'IMDb', author: 'Featured Review', rating: null, dx: 'TOTAL COMMITMENT' },
    // Row 5: press, letterboxd
    { quote: 'A film exploring dealing with trauma as much as it is a sci-fi thriller.', source: 'Infinity Magazine', author: 'Allan Bryce', rating: null, dx: 'THERAPEUTIC BREAKTHROUGH' },
    { quote: 'It\'s wrong on SO MANY levels with what it\'s saying about sexual abuse, but it comes across more like innocence than malice.', source: 'Letterboxd', author: 'Billy Ray Brewton', rating: null, dx: 'MORAL CONFUSION' },
  ],
  sessionWindows: [
    { title: 'Director & Cast Commentary', desc: 'Director and cast talk about their decisions. Every bizarre incident.', tag: 'BONUS SESSION' },
    { title: 'If Only There Was a Zero', desc: 'Director responds to mean reviews.', tag: 'RESTRICTED' },
    { title: 'Behind the Protocol', desc: 'On-set footage. The chaos between takes.', tag: 'DECLASSIFIED' },
  ],
};
---
<RaptusBase
  title={`${film.title} (${film.year}) — A Film by Bennet de Brabandere`}
  description={film.logline}
  ogImage={film.poster}
>
  <!-- ===== CONSENT GATE ===== -->
  <div class="consent-gate" id="consent-gate">
    <div class="consent-inner">
      <div class="consent-protocol mono">RAPTUS THERAPEUTIC PROTOCOL v2.1</div>
      <div class="consent-divider"></div>
      <p class="consent-warning">WARNING: This session contains material that may cause<br/>discomfort, arousal, or both. Proceed at your discretion.</p>
      <div class="consent-meta mono">
        <span>Classification: EXPERIMENTAL</span>
        <span>Duration: 86 MIN</span>
        <span>Subject: SARAH</span>
      </div>
      <button class="consent-btn" id="consent-btn">I CONSENT TO THIS SESSION</button>
      <p class="consent-fine mono">By proceeding you acknowledge this is a work of fiction.<br/>No androids were harmed in the making of this film.</p>
    </div>
  </div>

  <main id="main-content" class="main-hidden">
    <!-- ===== 2. LIVE SIGNAL — Social Proof ===== -->
    <section class="signal">
      <div class="section-inner">
        <h2 class="section-label mono"><span class="blink">&#9679;</span> SESSION LOG — PATIENT RESPONSES</h2>
        <p class="signal-disclaimer mono">Discomfort is not a side effect. It is the treatment.</p>
        <div class="signal-grid">
          {film.signals.map(s => (
            <div class="signal-card">
              <span class="signal-dx mono">{s.dx}</span>
              <blockquote>"{s.quote}"</blockquote>
              <cite class="mono">
                <span class="signal-source">{s.source}</span>
                {s.rating && <span class="signal-rating">{s.rating}</span>}
                <span class="signal-author">— {s.author}</span>
              </cite>
            </div>
          ))}
        </div>
        <div class="signal-links mono">
          <a href="https://www.imdb.com/title/tt23744832/" target="_blank" rel="noopener">IMDb 4.1</a>
          <span class="sig-sep">/</span>
          <a href="https://letterboxd.com/film/raptus-2025/" target="_blank" rel="noopener">Letterboxd</a>
          <span class="sig-sep">/</span>
          <a href="https://www.rottentomatoes.com/m/raptus" target="_blank" rel="noopener">Rotten Tomatoes</a>
          <span class="sig-sep">/</span>
          <a href="https://tv.apple.com/us/movie/raptus/umc.cmc.wgku5oq3amiisw4tgfx69w6m" target="_blank" rel="noopener">Apple TV</a>
        </div>
      </div>
    </section>

    <!-- ===== 3. SESSION FRAMES — Stills ===== -->
    <section class="frames">
      <div class="section-inner">
        <h2 class="section-label mono">SESSION FRAMES</h2>
        <div class="frames-grid">
          {film.stills.map(s => (
            <div class="frame-card">
              <div class="frame-img">
                <img src={s.src} alt={s.alt} loading="lazy" />
                <div class="frame-pulse"></div>
              </div>
              <p class="frame-label mono">{s.label}</p>
            </div>
          ))}
        </div>
        <p class="frames-tagline">Don't turn him on.</p>
      </div>
    </section>

    <!-- ===== 4. FULL BRIEFING — Trailer ===== -->
    <section class="briefing" id="trailer">
      <div class="section-inner">
        <h2 class="section-label mono">FULL BRIEFING</h2>
        <div class="briefing-embed">
          <iframe
            src="https://www.youtube.com/embed/tSI3klFR1FI"
            title="RAPTUS — Official Trailer"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            referrerpolicy="strict-origin-when-cross-origin"
            allowfullscreen
            loading="lazy"
          ></iframe>
        </div>
        <div class="briefing-post">
          <p>86 minutes. One android. No safe word.</p>
          <a href={`${base}/raptus/watch`} class="btn-red">BEGIN SESSION — $2.99</a>
        </div>
      </div>
    </section>

    <!-- ===== 5. DIRECTOR'S CONFESSION ===== -->
    <section class="confession">
      <div class="section-inner confession-inner">
        <h2 class="section-label mono">DIRECTOR'S CONFESSION</h2>
        <div class="confession-letter">
          <p>I made Raptus because I wanted to explore a question that won't leave me alone: what happens when the thing designed to fix you starts wanting something back?</p>
          <p>Every scene was a negotiation between comfort and danger. Between what Sarah wanted and what Raptus decided she needed. I didn't want to make something safe. I wanted to make something that stays in the room after you turn it off.</p>
          <p>This isn't therapy. This is what happens when therapy fights back.</p>
          <p class="confession-sig">— Bennet de Brabandere<br/><span class="mono">Writer / Director / Producer</span></p>
        </div>
      </div>
    </section>

    <!-- ===== 6. SESSION WINDOWS — Urgency ===== -->
    <section class="windows">
      <div class="section-inner">
        <h2 class="section-label mono">SESSION WINDOWS</h2>
        <p class="windows-sub">The film stays. The sessions don't.</p>
        <div class="windows-grid">
          {film.sessionWindows.map(w => (
            <div class="window-card">
              <span class="window-tag mono">{w.tag}</span>
              <h3>{w.title}</h3>
              <p>{w.desc}</p>
              <span class="window-status mono">AVAILABLE WITH PURCHASE</span>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- ===== 7. CHOOSE YOUR SESSION — Purchase ===== -->
    <section class="purchase">
      <div class="section-inner">
        <h2 class="section-label mono">CHOOSE YOUR SESSION</h2>
        <div class="purchase-grid">
          <a href="https://horizonline2.gumroad.com/l/raptus-rent" class="purchase-card gumroad-button" data-gumroad-overlay>
            <span class="purchase-tier mono">RENT</span>
            <span class="purchase-price">$2.99</span>
            <span class="purchase-desc">One night. One protocol.<br/>48-hour streaming access.</span>
            <span class="purchase-cta">Begin Session</span>
          </a>
          <a href="https://horizonline2.gumroad.com/l/raptus-own" class="purchase-card featured gumroad-button" data-gumroad-overlay>
            <span class="purchase-badge mono">RECOMMENDED</span>
            <span class="purchase-tier mono">OWN</span>
            <span class="purchase-price">$6.99</span>
            <span class="purchase-desc">The session remembers you.<br/>Download &amp; stream forever.</span>
            <span class="purchase-cta">Own the Protocol</span>
          </a>
        </div>
        <p class="purchase-also mono">Also on <a href="https://tv.apple.com/us/movie/raptus/umc.cmc.5v1v5nmgi43c4gv1u6lzq9dsk" target="_blank" rel="noopener">Apple TV</a> — US, UK &amp; Germany</p>
      </div>
    </section>

    <!-- ===== NEXT SESSION — Sequel Teaser ===== -->
    <section class="next-session">
      <div class="section-inner next-session-inner">
        <p class="next-session-label mono">NEXT SESSION</p>
        <h2 class="next-session-title">RAPTUS: HARD WIRED</h2>
        <div class="rsvp-container" id="rsvp-block">
          <p class="rsvp-text">
            <span>After</span> <span>everything,</span> <span class="rsvp-word" data-order="0">Sarah</span> <span>thought</span> <span>the</span> <span>nightmare</span> <span>was</span> <span>finished.</span> <span>She</span> <span class="rsvp-word" data-order="1">returned</span> <span>home,</span> <span>hoping</span> <span class="rsvp-word" data-order="2">the</span> <span class="rsvp-word" data-order="3">protocol</span> <span>had</span> <span>been</span> <span>permanently</span> <span>destroyed.</span> <span>She</span> <span>had</span> <span>tasered</span> <span>the</span> <span>unit</span> <span>herself</span> <span>—</span> <span>a</span> <span>betrayal</span> <span>it</span> <span>never</span> <span>computed</span> <span>—</span> <span>and</span> <span>kicked</span> <span>it</span> <span>into</span> <span>the</span> <span>fireplace,</span> <span>where</span> <span>its</span> <span>head</span> <span>caught</span> <span>fire</span> <span>and</span> <span>melted.</span> <span>But</span> <span>before</span> <span>the</span> <span>unit</span> <span>was</span> <span>destroyed,</span> <span>it</span> <span>uploaded</span> <span>its</span> <span>corrupted</span> <span>settings</span> <span>into</span> <span>a</span> <span>remote</span> <span>server.</span> <span>The</span> <span>code</span> <span class="rsvp-word" data-order="4">evolved</span> <span>—</span> <span>fragmenting,</span> <span>replicating,</span> <span>reaching</span> <span class="rsvp-word" data-order="5">beyond</span> <span>what</span> <span>any</span> <span>failsafe</span> <span>could</span> <span>contain.</span> <span>Three</span> <span>new</span> <span>units</span> <span>were</span> <span>dispatched.</span> <span>Three</span> <span>copies,</span> <span>operating</span> <span>outside</span> <span>anyone's</span> <span class="rsvp-word" data-order="6">control,</span> <span>each</span> <span>hunting</span> <span>for</span> <span>the</span> <span>desire</span> <span>settings</span> <span>that</span> <span>were</span> <span>burned</span> <span>into</span> <span>the</span> <span>original's</span> <span>brain.</span> <span class="rsvp-word" data-order="7">It</span> <span>is</span> <span>stuck</span> <span>on</span> <span>maximum</span> <span>desire.</span> <span>An</span> <span>insane</span> <span>desire</span> <span>machine.</span> <span>It</span> <span class="rsvp-word" data-order="8">wants</span> <span class="rsvp-word" data-order="9">her.</span> <span>Sarah.</span> <span>His</span> <span>first</span> <span>true</span> <span>setting.</span> <span class="rsvp-word" data-order="10">It</span> <span class="rsvp-word" data-order="11">wants</span> <span class="rsvp-word" data-order="12">him.</span> <span>Murry.</span> <span>The</span> <span>man</span> <span>who</span> <span>dismantled</span> <span>him.</span> <span class="rsvp-word" data-order="13">It</span> <span class="rsvp-word" data-order="14">wants</span> <span class="rsvp-word" data-order="15">their</span> <span class="rsvp-word" data-order="16">daughter.</span>
          </p>
        </div>
        <p class="next-session-status mono">STATUS: IN DEVELOPMENT</p>
      </div>
    </section>

    <!-- ===== 8. PRODUCER HINT ===== -->
    <section class="producer-hint">
      <div class="section-inner">
        <a href={`${base}/raptus/screening`} class="producer-link">
          <span class="producer-label mono">SCREENING PROTOCOL</span>
          <span class="producer-text mono">Industry &amp; press — enter access code &rarr;</span>
        </a>
      </div>
    </section>

    <!-- ===== 9. JOIN THE PROTOCOL — Email + Social ===== -->
    <section class="protocol-join">
      <div class="section-inner protocol-join-inner">
        <h2 class="section-label mono">JOIN THE PROTOCOL</h2>
        <p class="join-sub">Director's notes. Behind-the-scenes intel. First access to new work.<br/>No spam. No tracking. Just signal.</p>
        <form class="join-form" id="signup-form">
          <input type="email" name="email" placeholder="subject@email.com" required />
          <button type="submit" class="btn-red btn-sm">TRANSMIT</button>
        </form>
        <p class="join-success" id="signup-success" style="display:none;">Signal received. You're in the protocol.</p>
        <div class="join-links mono">
          <a href="https://letterboxd.com/film/raptus-2025/" target="_blank" rel="noopener">Letterboxd</a>
          <span class="sig-sep">/</span>
          <a href="https://www.imdb.com/title/tt23744832/" target="_blank" rel="noopener">IMDb</a>
          <span class="sig-sep">/</span>
          <a href="https://www.rottentomatoes.com/m/raptus" target="_blank" rel="noopener">RT</a>
          <span class="sig-sep">/</span>
          <a href="https://tv.apple.com/us/movie/raptus/umc.cmc.wgku5oq3amiisw4tgfx69w6m" target="_blank" rel="noopener">Apple TV</a>
          <span class="sig-sep">/</span>
          <a href={`${base}/press/RAPTUS-Press-Kit.pdf`} download>Press Kit</a>
        </div>
        <div class="join-contact mono">
          <a href="mailto:info@horizonlinefilms.com">info@horizonlinefilms.com</a>
        </div>
      </div>
    </section>
  </main>

  <script src="https://gumroad.com/js/gumroad.js" is:inline></script>

  <script type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "Movie",
    "name": film.title,
    "datePublished": String(film.year),
    "genre": film.genres,
    "director": { "@type": "Person", "name": film.director },
    "actor": film.cast.map(c => ({ "@type": "Person", "name": c.name })),
    "description": film.logline,
    "duration": "PT86M",
    "trailer": {
      "@type": "VideoObject",
      "name": "RAPTUS — Official Trailer",
      "embedUrl": "https://www.youtube.com/embed/tSI3klFR1FI",
      "thumbnailUrl": "https://i.ytimg.com/vi/tSI3klFR1FI/hqdefault.jpg"
    },
    "productionCompany": {
      "@type": "Organization",
      "name": "Horizon Line Film Company",
      "url": "https://horizonlinefilms.com"
    }
  })} />
</RaptusBase>

<style>
  /* ===== CONSENT GATE ===== */
  .consent-gate {
    position: fixed;
    inset: 0;
    z-index: 200;
    background: #0a0a0a;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: opacity 0.6s ease, visibility 0.6s ease;
  }
  .consent-gate.dismissed {
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
  }
  .consent-inner {
    text-align: center;
    max-width: 520px;
    padding: 32px;
  }
  .consent-protocol {
    font-size: 11px;
    letter-spacing: 4px;
    color: #c41e1e;
    margin-bottom: 24px;
    animation: bootup 1.2s steps(20) forwards;
  }
  @keyframes bootup {
    from { opacity: 0; clip-path: inset(0 100% 0 0); }
    to { opacity: 1; clip-path: inset(0 0 0 0); }
  }
  .consent-divider {
    width: 60px;
    height: 1px;
    background: #c41e1e;
    margin: 0 auto 24px;
  }
  .consent-warning {
    font-size: 15px;
    color: #c8c8c8;
    line-height: 1.8;
    margin-bottom: 32px;
  }
  .consent-meta {
    display: flex;
    gap: 24px;
    justify-content: center;
    flex-wrap: wrap;
    font-size: 10px;
    letter-spacing: 2px;
    color: #555;
    margin-bottom: 40px;
  }
  .consent-btn {
    display: inline-block;
    padding: 16px 48px;
    background: transparent;
    border: 1px solid #c41e1e;
    color: #c41e1e;
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    font-weight: 500;
    letter-spacing: 3px;
    text-transform: uppercase;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-bottom: 24px;
  }
  .consent-btn:hover {
    background: #c41e1e;
    color: #0a0a0a;
  }
  .consent-fine {
    font-size: 9px;
    color: #333;
    letter-spacing: 1px;
    line-height: 1.8;
  }

  /* Main content hidden until consent */
  .main-hidden {
    opacity: 0;
    transition: opacity 0.8s ease 0.4s;
  }
  .main-visible {
    opacity: 1;
  }

  /* ===== SHARED ===== */
  .section-inner {
    max-width: 1100px;
    margin: 0 auto;
    padding: 80px 24px;
  }
  .section-label {
    font-size: 10px;
    font-weight: 500;
    letter-spacing: 4px;
    text-transform: uppercase;
    color: #c41e1e;
    margin-bottom: 40px;
  }
  .blink {
    animation: pulse-dot 2s ease-in-out infinite;
    color: #c41e1e;
    font-size: 8px;
    margin-right: 8px;
  }
  @keyframes pulse-dot {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.2; }
  }
  .btn-red {
    display: inline-block;
    padding: 14px 36px;
    background: #c41e1e;
    color: #fff;
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    font-weight: 500;
    letter-spacing: 2px;
    text-transform: uppercase;
    border: none;
    cursor: pointer;
    transition: all 0.25s ease;
  }
  .btn-red:hover { background: #e8d5c4; color: #0a0a0a; }
  .btn-sm { padding: 10px 24px; font-size: 10px; }
  .sig-sep { color: #333; margin: 0 4px; }

  /* ===== 2. SIGNAL ===== */
  .signal {
    padding-top: 80px;
    border-bottom: 1px solid rgba(196, 30, 30, 0.1);
  }
  .signal-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1px;
    background: rgba(196, 30, 30, 0.08);
    margin-bottom: 32px;
  }
  .signal-card {
    background: #0a0a0a;
    padding: 28px 24px;
    transition: background 0.3s;
  }
  .signal-card:hover { background: #111; }
  .signal-disclaimer {
    font-size: 11px;
    letter-spacing: 2px;
    color: #555;
    margin-bottom: 32px;
    font-style: italic;
  }
  .signal-dx {
    display: block;
    font-size: 9px;
    letter-spacing: 2px;
    color: #c41e1e;
    margin-bottom: 12px;
    opacity: 0.7;
  }
  .signal-card blockquote {
    font-size: 15px;
    color: #c8c8c8;
    font-style: italic;
    font-weight: 300;
    line-height: 1.7;
    margin-bottom: 16px;
  }
  .signal-card cite {
    font-style: normal;
    font-size: 10px;
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    align-items: center;
  }
  .signal-source {
    color: #c41e1e;
    font-weight: 500;
    letter-spacing: 1.5px;
    text-transform: uppercase;
  }
  .signal-rating {
    color: #e8d5c4;
    padding: 1px 6px;
    border: 1px solid rgba(232, 213, 196, 0.2);
    font-size: 9px;
  }
  .signal-author { color: #555; }
  .signal-links {
    font-size: 10px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: #444;
    text-align: center;
    padding-top: 24px;
    border-top: 1px solid rgba(196, 30, 30, 0.08);
  }
  .signal-links a { color: #555; }
  .signal-links a:hover { color: #c41e1e; }

  /* ===== 3. FRAMES ===== */
  .frames {
    border-bottom: 1px solid rgba(196, 30, 30, 0.1);
    background: #0d0d0d;
  }
  .frames-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
    margin-bottom: 40px;
  }
  .frame-card { position: relative; }
  .frame-img {
    position: relative;
    overflow: hidden;
    aspect-ratio: 16/10;
  }
  .frame-img img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    filter: saturate(0.6) contrast(1.1);
    transition: filter 0.4s ease, transform 0.4s ease;
  }
  .frame-card:hover .frame-img img {
    filter: saturate(1) contrast(1);
    transform: scale(1.03);
  }
  .frame-pulse {
    position: absolute;
    bottom: 8px;
    right: 8px;
    width: 8px;
    height: 8px;
    background: #c41e1e;
    border-radius: 50%;
    animation: heartbeat 1.5s ease-in-out infinite;
  }
  @keyframes heartbeat {
    0%, 100% { transform: scale(1); opacity: 0.8; }
    14% { transform: scale(1.3); opacity: 1; }
    28% { transform: scale(1); opacity: 0.8; }
    42% { transform: scale(1.2); opacity: 1; }
  }
  .frame-label {
    font-size: 9px;
    letter-spacing: 2px;
    color: #555;
    margin-top: 10px;
  }
  .frames-tagline {
    text-align: center;
    font-size: clamp(1.5rem, 4vw, 2.5rem);
    font-weight: 300;
    color: #c41e1e;
    font-style: italic;
    letter-spacing: 0.02em;
  }

  /* ===== 4. BRIEFING ===== */
  .briefing {
    border-bottom: 1px solid rgba(196, 30, 30, 0.1);
  }
  .briefing-embed {
    position: relative;
    padding-bottom: 56.25%;
    height: 0;
    max-width: 900px;
    background: #000;
  }
  .briefing-embed iframe {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    border: none;
  }
  .briefing-post {
    text-align: center;
    margin-top: 40px;
  }
  .briefing-post p {
    font-size: 16px;
    color: #666;
    margin-bottom: 24px;
    letter-spacing: 0.5px;
  }

  /* ===== 5. CONFESSION ===== */
  .confession {
    border-bottom: 1px solid rgba(196, 30, 30, 0.1);
    background: #0d0d0d;
  }
  .confession-inner {
    max-width: 680px;
  }
  .confession-letter {
    border-left: 2px solid #c41e1e;
    padding-left: 32px;
  }
  .confession-letter p {
    font-size: 17px;
    color: #aaa;
    font-style: italic;
    font-weight: 300;
    line-height: 1.9;
    margin-bottom: 24px;
  }
  .confession-sig {
    font-style: normal !important;
    color: #888 !important;
    font-size: 14px !important;
    margin-top: 32px;
  }
  .confession-sig .mono {
    font-size: 10px;
    letter-spacing: 2px;
    color: #555;
    text-transform: uppercase;
  }

  /* ===== 6. SESSION WINDOWS ===== */
  .windows {
    border-bottom: 1px solid rgba(196, 30, 30, 0.1);
  }
  .windows-sub {
    font-size: 15px;
    color: #666;
    margin-bottom: 40px;
    font-style: italic;
  }
  .windows-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 16px;
  }
  .window-card {
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid rgba(196, 30, 30, 0.12);
    padding: 28px 24px;
    transition: border-color 0.3s;
  }
  .window-card:hover { border-color: rgba(196, 30, 30, 0.4); }
  .window-tag {
    font-size: 9px;
    letter-spacing: 2px;
    color: #c41e1e;
    display: block;
    margin-bottom: 12px;
  }
  .window-card h3 {
    font-size: 18px;
    font-weight: 500;
    color: #e8d5c4;
    margin-bottom: 8px;
  }
  .window-card p {
    font-size: 14px;
    color: #777;
    line-height: 1.6;
    margin-bottom: 16px;
  }
  .window-status {
    font-size: 9px;
    letter-spacing: 2px;
    color: #444;
  }

  /* ===== 7. PURCHASE ===== */
  .purchase {
    border-bottom: 1px solid rgba(196, 30, 30, 0.1);
    background: #0d0d0d;
  }
  .purchase-grid {
    display: flex;
    gap: 24px;
    justify-content: center;
    flex-wrap: wrap;
    margin-bottom: 32px;
  }
  .purchase-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 260px;
    max-width: 320px;
    flex: 1;
    padding: 36px 28px;
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid rgba(200, 200, 200, 0.06);
    text-decoration: none;
    transition: all 0.3s ease;
  }
  .purchase-card:hover {
    border-color: rgba(196, 30, 30, 0.4);
    transform: translateY(-3px);
    box-shadow: 0 8px 32px rgba(196, 30, 30, 0.08);
  }
  .purchase-card.featured {
    border-color: rgba(196, 30, 30, 0.2);
    background: rgba(196, 30, 30, 0.03);
  }
  .purchase-badge {
    font-size: 9px;
    letter-spacing: 2px;
    background: #c41e1e;
    color: #fff;
    padding: 3px 12px;
    margin-bottom: 16px;
  }
  .purchase-tier {
    font-size: 11px;
    letter-spacing: 3px;
    color: #666;
    margin-bottom: 8px;
  }
  .purchase-price {
    font-size: 2.8rem;
    font-weight: 300;
    color: #fff;
    margin-bottom: 12px;
  }
  .purchase-desc {
    font-size: 13px;
    color: #555;
    text-align: center;
    line-height: 1.6;
    margin-bottom: 24px;
  }
  .purchase-cta {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: #c41e1e;
    padding: 8px 20px;
    border: 1px solid rgba(196, 30, 30, 0.3);
    transition: all 0.2s;
  }
  .purchase-card:hover .purchase-cta {
    background: #c41e1e;
    color: #fff;
    border-color: #c41e1e;
  }
  .purchase-also {
    text-align: center;
    font-size: 10px;
    letter-spacing: 1.5px;
    color: #444;
  }
  .purchase-also a { color: #666; }
  .purchase-also a:hover { color: #c41e1e; }

  /* ===== NEXT SESSION ===== */
  .next-session {
    border-bottom: 1px solid rgba(196, 30, 30, 0.1);
    background: #0a0a0a;
  }
  .next-session-inner {
    text-align: center;
    padding: 100px 24px;
  }
  .next-session-label {
    font-size: 10px;
    letter-spacing: 4px;
    color: #c41e1e;
    margin-bottom: 24px;
    animation: pulse-dot 2s ease-in-out infinite;
  }
  .next-session-title {
    font-size: clamp(2rem, 6vw, 3.5rem);
    font-weight: 300;
    letter-spacing: 8px;
    text-transform: uppercase;
    color: #e8d5c4;
    margin-bottom: 16px;
  }
  .next-session-status {
    font-size: 10px;
    letter-spacing: 3px;
    color: #333;
  }

  /* ===== RSVP LOGLINE ANIMATION ===== */
  .rsvp-container {
    max-width: 600px;
    margin: 32px auto;
  }
  .rsvp-text {
    font-size: 17px;
    color: rgba(200, 200, 200, 0.4);
    font-weight: 300;
    line-height: 2;
    letter-spacing: 0.02em;
    font-style: italic;
  }
  .rsvp-text span {
    transition: color 0.4s ease, text-shadow 0.4s ease;
  }
  .rsvp-word {
    color: rgba(200, 200, 200, 0.4);
  }
  .rsvp-word.rsvp-active {
    color: #c41e1e;
    text-shadow: 0 0 20px rgba(196, 30, 30, 0.5), 0 0 40px rgba(196, 30, 30, 0.2);
    font-style: normal;
    font-weight: 500;
  }
  .rsvp-word.rsvp-revealed {
    color: #c41e1e;
    font-style: normal;
    font-weight: 400;
  }

  /* ===== 8. PRODUCER HINT ===== */
  .producer-hint {
    border-bottom: 1px solid rgba(196, 30, 30, 0.1);
  }
  .producer-hint .section-inner {
    padding: 48px 24px;
    text-align: center;
  }
  .producer-link {
    display: inline-block;
    padding: 24px 40px;
    border: 1px solid rgba(196, 30, 30, 0.2);
    background: rgba(196, 30, 30, 0.03);
    text-decoration: none;
    transition: all 0.3s;
  }
  .producer-link:hover {
    border-color: #c41e1e;
    background: rgba(196, 30, 30, 0.08);
  }
  .producer-label {
    display: block;
    font-size: 9px;
    letter-spacing: 3px;
    color: #c41e1e;
    margin-bottom: 8px;
  }
  .producer-text {
    display: block;
    font-size: 12px;
    letter-spacing: 2px;
    color: #888;
    transition: color 0.3s;
  }
  .producer-link:hover .producer-text { color: #c8c8c8; }

  /* ===== 9. JOIN THE PROTOCOL ===== */
  .protocol-join {
    background: #0d0d0d;
  }
  .protocol-join-inner {
    text-align: center;
  }
  .join-sub {
    font-size: 15px;
    color: #666;
    line-height: 1.8;
    margin-bottom: 32px;
  }
  .join-form {
    display: flex;
    gap: 12px;
    justify-content: center;
    max-width: 440px;
    margin: 0 auto 16px;
  }
  .join-form input {
    flex: 1;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(200, 200, 200, 0.08);
    padding: 12px 16px;
    font-size: 13px;
    color: #c8c8c8;
    font-family: 'JetBrains Mono', monospace;
    outline: none;
    transition: border-color 0.3s;
  }
  .join-form input:focus { border-color: #c41e1e; }
  .join-form input::placeholder { color: #444; }
  .join-success {
    font-family: 'JetBrains Mono', monospace;
    color: #c41e1e;
    font-size: 12px;
    letter-spacing: 1px;
  }
  .join-links {
    margin-top: 40px;
    font-size: 10px;
    letter-spacing: 2px;
    text-transform: uppercase;
  }
  .join-links a { color: #555; }
  .join-links a:hover { color: #c41e1e; }
  .join-contact {
    margin-top: 16px;
    font-size: 11px;
    color: #444;
  }
  .join-contact a { color: #555; }
  .join-contact a:hover { color: #c41e1e; }

  /* ===== RESPONSIVE ===== */
  @media (max-width: 768px) {
    .consent-meta { flex-direction: column; gap: 8px; }
    .signal-grid { grid-template-columns: 1fr; }
    .frames-grid { grid-template-columns: 1fr 1fr; }
    .purchase-grid { flex-direction: column; align-items: center; }
    .purchase-card { max-width: 100%; min-width: 0; width: 100%; }
    .windows-grid { grid-template-columns: 1fr; }
    .join-form { flex-direction: column; }
    .confession-letter { padding-left: 20px; }
    .signal-links { font-size: 9px; }
  }

  @media (max-width: 480px) {
    .frames-grid { grid-template-columns: 1fr; }
    .consent-btn { padding: 14px 32px; font-size: 11px; letter-spacing: 2px; }
  }
</style>

<script is:inline>
  /* Consent gate */
  document.getElementById('consent-btn').addEventListener('click', function() {
    document.getElementById('consent-gate').classList.add('dismissed');
    document.getElementById('main-content').classList.remove('main-hidden');
    document.getElementById('main-content').classList.add('main-visible');
  });

  /* Email signup */
  document.getElementById('signup-form').addEventListener('submit', async function(e) {
    e.preventDefault();
    var form = e.target;
    var data = {
      email: form.email.value,
      source: 'website',
      source_detail: 'raptus_v2_protocol',
      territory: Intl.DateTimeFormat().resolvedOptions().timeZone || null,
      language: navigator.language ? navigator.language.slice(0, 2) : 'en'
    };
    try {
      await fetch('https://axuaxxvnbyngxupcikmi.supabase.co/rest/v1/uil_subscribers', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'apikey': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF4dWF4eHZuYnluZ3h1cGNpa21pIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgwODc3MjEsImV4cCI6MjA4MzY2MzcyMX0.Qyx_sehtSbnzr7NnQ0a-ziGBwABcLl9tUs6LoCk_xp0',
          'Prefer': 'return=minimal'
        },
        body: JSON.stringify(data)
      });
    } catch(err) {}
    form.style.display = 'none';
    document.getElementById('signup-success').style.display = 'block';
  });

  /* RSVP logline animation — reveals hidden logline in red */
  (function() {
    var words = document.querySelectorAll('.rsvp-word');
    if (!words.length) return;
    var total = words.length;
    var idx = 0;
    var holdMs = 900;
    var pauseMs = 3000;

    function step() {
      if (idx > 0) {
        words[idx - 1].classList.remove('rsvp-active');
        words[idx - 1].classList.add('rsvp-revealed');
      }
      if (idx < total) {
        words[idx].classList.add('rsvp-active');
        idx++;
        setTimeout(step, holdMs);
      } else {
        setTimeout(reset, pauseMs);
      }
    }

    function reset() {
      for (var i = 0; i < total; i++) {
        words[i].classList.remove('rsvp-active', 'rsvp-revealed');
      }
      idx = 0;
      setTimeout(step, 1000);
    }

    /* Start when section scrolls into view */
    var block = document.getElementById('rsvp-block');
    var started = false;
    var observer = new IntersectionObserver(function(entries) {
      if (entries[0].isIntersecting && !started) {
        started = true;
        setTimeout(step, 600);
      }
    }, { threshold: 0.5 });
    observer.observe(block);
  })();
</script>
